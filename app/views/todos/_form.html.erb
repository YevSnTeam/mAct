<%= form_for(@todo) do |f| %>
 <% if @todo.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@todo.errors.count, "error") %> prohibited this todo from being saved:</h2>

      <ul>
      <% @todo.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %> 

<table>
	<tr>
		<td>
		  <div class="field">
		    <%= f.label :name %><br />
		    <%= f.text_field :name %>
		  </div>
        </td>
  		<td>
		  <div class="field">
		  		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
				<meta http-equiv="Content-Style-Type" content="text/css">
				<meta http-equiv="Content-Script-Type" content="text/javascript">
				<script type="text/javascript">
					function formatText (el,tag) {
						var selectedText=document.selection?document.selection.createRange().text:el.value.substring(el.selectionStart,el.selectionEnd);
						if (selectedText!='') {
							var newText='<'+tag+'>'+selectedText+'</'+tag+'>';
							el.value=el.value.replace(selectedText,newText)
						}
					} 
				</script>
		  		<%= f.label :category_id, "Kategorie"%> <br />
		  		<%= f.select :category_id, Category.all.map {|d| [d.cname,d.id]}, prompt: "Bitte waehlen" %>  		
		  </div>
  		</td>
  		<td>
		  <%= f.fields_for :photo do |builder| %>
		  	<div class="field">
		  		<%= builder.label :photofile, "Fotoupload" %> <br />
		  		<%= builder.file_field :photofile %>
		  	</div>
		  <% end %>
		</td>
		<td>
			<div class="actions">
   				 <%= f.submit %>
			</div>
		</td>
  </tr>
</table>  

<div class="field">
	<%= f.label :description, "Beschreibung"%><br />
	<%= submit_tag "B", type: 'button', onclick: "formatText(todo_description, 'b');" %>
	<%= submit_tag "I", type: 'button', onclick: "formatText(todo_description, 'i');" %>
	<%= submit_tag "U", type: 'button', onclick: "formatText(todo_description, 'u');"  %><br />
	<%= f.text_area :description %>
	</div>
<% end %>
  